<div class="{{ section.settings.custom_class }}">
  <div class="container">
    <div class="section_header ms-0 pb-md-0 text-md-start text-center">
      {% if section.settings.heading != blank %}
        <h2 class="title-lg">
          {{ section.settings.heading }}
        </h2>
      {% endif %}
    </div>
    <div class="how_to-install pb-md-0 pb-4">
      <div class="row align-items-end pb-md-4">
        <div class="col-lg-9 col-sm-7">
          <div class="row d-lg-flex d-none">
            {% for block in section.blocks %}
              {% case block.type %}
                {% when 'steps' %}
                  <div class="col-lg-4 col-md-6">
                    <div class="step_cards">
                      <div class="step_flag">
                        <p>STEP {{ forloop.index }}</p>
                      </div>
                      {% if block.settings.step_img != blank %}
                        <img src="{{ block.settings.step_img | img_url: 'master' }}" alt="" class="img-fluid">
                      {% endif %}
                      {% if block.settings.text != blank %}
                        <div class="step_text">
                          <p>{{ block.settings.text }}</p>
                        </div>
                      {% endif %}
                    </div>
                  </div>
              {% endcase %}
            {% endfor %}
          </div>
          <div class="steps_tabs d-lg-none">
            <ul
              class="nav nav-tabs d-flex justify-content-center border-0"
              id="myTab"
              role="tablist"
            >
              {% for block in section.blocks %}
                {% if block.type == 'steps' %}
                  <li class="nav-item" role="presentation">
                    <button
                      class="nav-link {% if forloop.first %} active {%endif %}"
                      id="step-{{ block.id }}"
                      data-bs-toggle="tab"
                      data-bs-target="#step-tab{{ block.id }}"
                      type="button"
                      role="tab"
                      aria-controls="step-tab{{ block.id }}"
                      aria-selected="true"
                    >
                      STEP {{ forloop.index }}
                    </button>
                  </li>
                {% endif %}
              {% endfor %}
            </ul>
            <div class="tab-content" id="myTabContent">
              {% for block in section.blocks %}
                {% case block.type %}
                  {% when 'steps' %}
                    <div
                      class="tab-pane fade {% if forloop.first %} active show {%endif %}"
                      id="step-tab{{ block.id }}"
                      role="tabpanel"
                      aria-labelledby="step-{{ block.id }}"
                    >
                      <div class="step_cards">
                        {% if block.settings.step_img != blank %}
                          <img src="{{ block.settings.step_img | img_url: 'master' }}" alt="" class="img-fluid">
                        {% endif %}
                        {% if block.settings.text != blank %}
                          <div class="step_text">
                            <p>{{ block.settings.text }}</p>
                          </div>
                        {% endif %}
                      </div>
                    </div>
                {% endcase %}
              {% endfor %}
            </div>
          </div>
        </div>
        <div class="col-lg-3 col-sm-5 order-first order-md-0">
          {% for block in section.blocks %}
            {% if block.type == 'video' %}
              <div class="actVideo_block">
                <div class="ctmVideo__block">
                  <div class="player">
                    <div class="wistia_responsive_padding" style="position:relative;">
                      <div
                        class="wistia_responsive_wrapper"
                        style="height:100%;left:0;position:absolute;top:0;width:100%;"
                      >
                        <div
                          class="wistia_embed wistia_async_{{ block.settings.wistia }} seo=false videoFoam=true"
                          style="height:100%;position:relative;width:100%"
                        >
                          <div
                            class="wistia_swatch"
                            style="height:100%;left:0;opacity:0;overflow:hidden;position:absolute;top:0;transition:opacity 200ms;width:100%;"
                          >
                            <img
                              src="https://fast.wistia.com/embed/medias/{{ block.settings.wistia }}/swatch"
                              style="filter:blur(5px);height:100%;object-fit:contain;width:100%;"
                              alt=""
                              aria-hidden="true"
                              onload="this.parentNode.style.opacity=1;"
                            >
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "t:sections.how-install.label",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "t:common.heading.label"
    },
    {
      "type": "textarea",
      "id": "custom_class",
      "label": "t:common.classname.custom",
      "default": "section"
    }
  ],
  "blocks": [
    {
      "type": "steps",
      "name": "t:common.step.label",
      "limit": 3,
      "settings": [
        {
          "type": "image_picker",
          "id": "step_img",
          "label": "t:common.image.label"
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "t:common.text.content"
        }
      ]
    },
    {
      "type": "video",
      "name": "t:common.wistia.label",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "wistia",
          "label": "t:common.wistia.id.label"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.how-install.label",
      "settings": {
        "heading": "How to install",
        "custom_class": "section"
      },
      "blocks": [
        {
          "type": "steps",
          "settings": {
            "step_img": "shopify:\/\/shop_images\/faucet_use_s_1.webp",
            "text": "Remove faucet aerator. Simply attach and twist it off using the key for removal."
          }
        },
        {
          "type": "steps",
          "settings": {
            "step_img": "shopify:\/\/shop_images\/faucet_use_s_2.webp",
            "text": "Find the faucet thread accessory which best fits your faucet size."
          }
        },
        {
          "type": "steps",
          "settings": {
            "step_img": "shopify:\/\/shop_images\/faucet_use_s_3.webp",
            "text": "Clip Qure Faucet Filter onto the faucet. Once you hear it click it is installed. Turn the toggle button to “Q” mark on the filter ans enjoy healthier, clearer skin!"
          }
        },
        {
          "type": "video",
          "settings": {
            "wistia": "t0xzq5gdvm"
          }
        }
      ]
    }
  ]
}
{% endschema %}
