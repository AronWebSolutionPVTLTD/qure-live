{%- assign banner_count = 0 -%}

{%- for block in section.blocks -%}
	{%- case block.type -%}
        {%- when 'banner' -%}
            {%- assign banner_count = banner_count | plus: 1 -%}
    {%- endcase -%}
{%- endfor -%}

<style>
/* specical for desktop */
@media only screen and (min-width:769px){
    /*
    .collectio-banner picture {
        min-height: 240px;
    }   
    */
}
.collectio-banner .heading {
    position: absolute;
    font-family: Poppins;
    font-style: normal;
    font-weight: 400;
    font-size: 34px;
    line-height: 48px;
    text-align: center;
    letter-spacing: .3px;
    color: rgb(0 0 0 / 80%);
}
.collectio-banner .heading {
    position: absolute;
    font-family: Poppins;
    font-style: normal;
    font-weight: 400;
    font-size: 34px;
    line-height: 48px;
    text-align: center;
    letter-spacing: .3px;
    color: rgb(0 0 0 / 80%);
}
/* special for mobile */
@media (max-width: 768px) {
    .collectio-banner picture {
        min-height: 150px;
    }
    .collectio-banner .heading {
        font-size: 18px;
        line-height: 24px;
        width: 176px;
    }
    .d-block p {
        font-size: 10px !important;
    }
    .d-block p strong {
        font-weight:800 !important;
    }
}
</style>

{% if banner_count > 0 %}
    {%- for block in section.blocks -%}
        {% if block.type == 'banner' %}

            <style>
                .bf_sale-banners .collection_banner h1 {
                    font-family: "Canela light";
                }
                .collection_text{
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    height: 100%;
                }

                .discount_banner .collection_text h6 {
                    color: #F10000;
                    font-size: 17.941px;
                    font-weight: 700;
                    line-height: 35.659px;
                    letter-spacing: 0.418px;
                    text-transform: uppercase;
                    margin-bottom: 0;
                }
                .discount_banner .collection_text h1 {
                    font-size: 71px;
                    font-weight: 500;
                    line-height: 90.655px;
                    letter-spacing: 0.711px;
                    color: #fff;
                    margin-bottom: 0;
                }
                .discount_banner {
                    background-color: #000;
                }
                .discount_banner .collection_text p {
                    font-size: 14px;
                    font-weight: 300;
                    line-height: 32.357px;
                    letter-spacing: 1.54px;
                    color: #fff;
                }
                .discount_banner .collection_img .w-chrome.notranslate{
                    height: 100% !important;
                }

                @media(max-width:767px) {
                    .bf_sale-banners .collection_banner h1 {
                        font-family: "Canela light";
                        font-size: 24px;
                        line-height: 32px;
                        letter-spacing: 0.24px;
                    }
                    .collection_banner .btn_black {
                        font-size: 11px;
                        padding: 6px 19px;
                        width: 100%;
                    }
                    .bf_sale-banners .collection_banner h1 strong {
                        display: block;
                    }

                    .discount_banner .collection_text h1{
                        font-size: 43px;
                        line-height: 55.422px;
                        letter-spacing: 0.434px;
                        margin-bottom: 20px;
                    }
                    .discount_banner .collection_text h6{
                        font-size: 10px;
                        line-height: 19.876px;
                        letter-spacing: 0.233px;
                    }
                    .discount_banner .collection_text p{
                        font-size: 12px;
                        font-weight: 300;
                        line-height: 32.357px;
                    }
                }                
            </style>

            <div class="bf_sale-banners">
                <div class="discount_banner"{% if block.settings.link_url != blank %} onclick="location.href='{{ block.settings.link_url }}';" style="cursor: pointer"{% endif %}>
                    <div class="container-fluid px-0">
                        <div class="row mx-0">
                            <div class="col-lg-7 col-7 px-0">
                                <div class="collection_text text-center">
                                    <div>
                                        {% if block.settings.heading != blank %}
                                            <h6>{{ block.settings.heading }}</h6>
                                        {% endif %}
                                        {% if block.settings.subheading != blank %}
                                            <h1>{{ block.settings.subheading }}</h1>
                                        {% endif %}
                                        {% if block.settings.text != blank %}
                                            <p>{{ block.settings.text }}</p>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-5 col-5 px-0">
                                {% if block.settings.wistia_id != blank %}
                                    <div class="collection_img pe-none d-lg-block d-none">
                                        <div class="wistia_responsive_padding" style="position:relative;">
                                            <div class="wistia_responsive_wrapper"
                                                style="height:100%;left:0;position:absolute;top:0;width:100%;">
                                                <div class="wistia_embed wistia_async_{{ block.settings.wistia_id }} seo=false videoFoam=true"
                                                    style="height:100%;position:relative;width:100%">&nbsp;</div>
                                            </div>
                                        </div>
                                    </div>
                                    <script src="https://fast.wistia.com/embed/medias/{{ block.settings.wistia_id }}.jsonp" async></script>
                                {% endif %}

                                {% if block.settings.wistia_id_mobile != blank %}
                                    <div class="collection_img pe-none d-lg-none">
                                        <div class="wistia_responsive_padding" style="position:relative;">
                                            <div class="wistia_responsive_wrapper"
                                                style="height:100%;left:0;position:absolute;top:0;width:100%;">
                                                <div class="wistia_embed wistia_async_{{ block.settings.wistia_id_mobile }} seo=false videoFoam=true"
                                                    style="height:100%;position:relative;width:100%">&nbsp;</div>
                                            </div>
                                        </div>
                                    </div>
                                    <script src="https://fast.wistia.com/embed/medias/{{ block.settings.wistia_id_mobile }}.jsonp" async></script>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <script src="https://fast.wistia.com/assets/external/E-v1.js" async></script> 
        {% endif %}
    {% endfor %}
{% else %}
    <div class="collectio-banner"{% if section.settings.link_url != blank %} onclick="location.href='{{ section.settings.link_url }}';" style="cursor: pointer"{% endif %}>

        {% if section.settings.image != blank %}
            <picture>
                <source media="(min-width:900px)" srcset="{{ section.settings.image | img_url: 'master' }}">
                {% if section.settings.image_mobile %}
                    <source media="(min-width:720px)" srcset="{{ section.settings.image_mobile | img_url: '720x' }}">
                {% endif %}
                {% if section.settings.image_mobile %}
                    <img class="img-fluid" src="{{ section.settings.image_mobile | img_url: '720x' }}" alt="{{ section.settings.image_mobile.alt | escape }}" width="75" height="31" alt="">
                {% else %}
                    <img class="img-fluid" src="{{ section.settings.image | img_url: '900x' }}" alt="{{ section.settings.image.alt | escape }}" width="75" height="31" alt="">
                {% endif %}
            </picture>
        {% endif %}

        {% if section.settings.heading != blank %}
            <div class="heading d-none d-md-block">
                {{ section.settings.heading }}
            </div>
        {% endif %}

        {% if section.settings.heading_mobile != blank %}
            <div class="heading d-block d-md-none">
                {{ section.settings.heading_mobile }}
            </div>
        {% endif %}
    </div>  
{% endif %}


<script>
    document.addEventListener("DOMContentLoaded", function() {
        setInterval(
            function () {
                var classNameRaman = document.getElementById("offcanvasBottom").classList;
                
                if (classNameRaman.contains('show')) {
                    $('html').addClass('filterActive');
                }
                else {
                    $('html').removeClass('filterActive');
                }
            }
        )

        function clcBtnHeight() {
            var collection_item = $('.fixed_height_btn');

            function setBtnHeight() {
                var collectionBtnHeight = $(".pdt_cln_bottom").outerHeight();
                collection_item.css('--collectionBtnHeight', collectionBtnHeight + 'px');
            }

            // Initial execution
            setBtnHeight();

            // Execute on window resize
            $(window).on('resize', function () {
                setBtnHeight();
            });
        }

        // Call the function to start listening for window resize
        clcBtnHeight();
    });
</script>

{% schema %}
    {
        "name": "t:sections.collection.name",
        "class": "section-collection",
        "settings": [
            {
                "type": "richtext",
                "id": "heading",
                "label": "t:common.heading.label"
            },
            {
                "type": "richtext",
                "id": "heading_mobile",
                "label": "t:common.heading.mobile.label"
            },
            {
                "type": "image_picker",
                "id": "image",
                "label": "t:common.image.label"
            },
            {
                "type": "image_picker",
                "id": "image_mobile",
                "label": "t:common.image_mobile.label"
            },
            {
                "type": "url",
                "id": "link_url",
                "label": "t:common.link.url.label"
            }
        ],
        "blocks": [
            {
                "type": "banner",
                "name": "t:common.banner.label",
                "limit": 1,
                "settings": [
                    {
                        "type": "text",
                        "id": "heading",
                        "label": "t:common.heading.label"
                    },
                    {
                        "type": "text",
                        "id": "subheading",
                        "label": "t:common.subheading.label"
                    },
                    {
                        "type": "text",
                        "id": "text",
                        "label": "t:common.text.label"
                    },
                    {
                        "type": "text",
                        "id": "wistia_id",
                        "label": "t:common.wistia.id.label"
                    },
                    {
                        "type": "text",
                        "id": "wistia_id_mobile",
                        "label": "t:common.wistia.id.mobile"
                    },
                    {
                        "type": "url",
                        "id": "link_url",
                        "label": "t:common.link.url.label"
                    }
                ]
		    }
        ]
    }
{% endschema %}