<div class="swiper swiper-products-carousel" data-wistia-id="{{ metaobject.wistia_id }}">
  <div class="swiper-wrapper">
    {% for media in metaobject.image_or_video.value %}
        {% if media.media_type == 'video' %}
          {% if media.sources[1].url != blank %}
            {% assign video_source_url = media.sources[1].url %}
          {% else %}
            {% assign video_source_url = media.sources[0].url %}
          {% endif %}

          <div class="swiper-slide video_popup" data-media="{{ media.media_type }}">
            <a
              class="popup-youtube d-block"
              href="{{ video_source_url }}"
            >
            <img
              class="img-fluid swiper-products-carousel__image"
              src="{{ media | image_url: width: 560, height: 496 }}"
              width="560"
              height="496"
              alt="{{ media.alt | escape }}"
            >
            </a>
          </div>
        {% else %}
          <div class="swiper-slide" data-media="{{ media.media_type }}">
            <a class="banner-popup-link" id="popup-link">
              <img
                class="img-fluid tab_img swiper-products-carousel__image"
                src="{{ media | image_url: width: 560, height: 496 }}"
                width="560"
                height="496"
                alt="{{ media.alt | escape }}"
              >
            </a>
          </div>
        {% endif %}
    {% endfor %}

     {% comment %} wistia video  {% endcomment %}
    {% if metaobject.wistia_id != blank %}
      <div class="swiper-slide video_popup pe-none" >
        <div class="wistia_responsive_padding" style="position:relative;">
            <div class="wistia_responsive_wrapper"
                style="height:100%;left:0;position:absolute;top:0;width:100%;">
                <div class="wistia_embed wistia_async_{{ metaobject.wistia_id }} seo=false videoFoam=true"
                    style="height:100%;position:relative;width:100%">
                  <div class="wistia_swatch"
                      style="height:100%;left:0;opacity:0;overflow:hidden;position:absolute;top:0;transition:opacity 200ms;width:100%;">
                      <img src="https://fast.wistia.com/embed/medias/{{ metaobject.wistia_id }}/swatch"
                          style="filter:blur(5px);height:100%;object-fit:contain;width:100%;"
                          alt="" aria-hidden="true"
                          onload="this.parentNode.style.opacity=1;" 
                      />
                  </div>
                </div>
            </div>
        </div>
      </div>
    {% endif %}
  </div>
</div>

<div class="swiper-products-thumbs">
  <div thumbsSlider="" class="swiper swiper-products-thumbs__container">
    <div class="swiper-wrapper">
      {% for media in metaobject.image_or_video.value %}
          {% if media.media_type == 'video' %}
            {% if media.sources[1].url != blank %}
              {% assign video_source_url = media.sources[1].url %}
            {% else %}
              {% assign video_source_url = media.sources[0].url %}
            {% endif %}

            <div class="swiper-slide video_popup" data-media="{{ media.media_type }}">
              <a
                class="popup-youtube d-block"
              >
                <img
                  class="img-fluid thumb-image"
                  src="{{ media | image_url: width: 500 }}"
                  width="500"
                  height="64"
                  alt="{{ media.alt | escape }}"
                >
              </a>
            </div>
          {% else %}
            <div class="swiper-slide" data-media="{{ media.media_type }}">
              <a class="banner-popup-link" id="popup-link">
                <img
                  class="img-fluid tab_img thumb-image"
                  src="{{ media | image_url: width: 500 }}"
                  width="500"
                  height="64"
                  alt="{{ media.alt | escape }}"
                >
              </a>
            </div>
          {% endif %}
      {% endfor %}

      {% comment %} wistia video  {% endcomment %}
      {% if metaobject.wistia_id != blank %}
        <div class="swiper-slide video_popup pe-none" >
          <div class="wistia_responsive_padding" style="position:relative;">
              <div class="wistia_responsive_wrapper"
                  style="height:100%;left:0;position:absolute;top:0;width:100%;">
                  <div class="wistia_embed wistia_async_{{ metaobject.wistia_id }} seo=false videoFoam=true"
                      style="height:100%;position:relative;width:100%">
                    <div class="wistia_swatch"
                        style="height:100%;left:0;opacity:0;overflow:hidden;position:absolute;top:0;transition:opacity 200ms;width:100%;">
                        <img src="https://fast.wistia.com/embed/medias/{{ metaobject.wistia_id }}/swatch"
                            style="filter:blur(5px);height:100%;object-fit:contain;width:100%;"
                            alt="" aria-hidden="true"
                            onload="this.parentNode.style.opacity=1;" 
                        />
                    </div>
                  </div>
              </div>
          </div>
        </div>
      {% endif %}
    </div>
    
    <!-- navigation buttons -->
    <div class="swiper-button-prev"></div>
    <div class="swiper-button-next"></div>
  </div>
</div>
